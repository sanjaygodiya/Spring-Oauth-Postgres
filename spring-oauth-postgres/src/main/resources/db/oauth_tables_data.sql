CREATE TABLE USERS(
   ID INTEGER PRIMARY KEY NOT NULL,
   USERNAME  TEXT NOT NULL,
   PASSWORD TEXT NOT NULL,
   ACCOUNT_EXPIRED BOOLEAN  NOT NULL,
   ACCOUNT_LOCKED BOOLEAN   NOT NULL,
   CREDENTIALS_EXPIRED BOOLEAN  NOT NULL,
   ENABLED BOOLEAN  NOT NULL
);

CREATE TABLE AUTHORITY(
   ID BIGINT PRIMARY KEY NOT NULL,
   NAME  TEXT NOT NULL
);

CREATE TABLE USERS_AUTHORITIES(
   USER_ID INTEGER NOT NULL,
   AUTHORITY_ID BIGINT NOT NULL
);

INSERT INTO AUTHORITY(ID, NAME) VALUES (1, 'DATA_CREATE');
INSERT INTO AUTHORITY(ID, NAME) VALUES (2, 'DATA_READ');
INSERT INTO AUTHORITY(ID, NAME) VALUES (3, 'DATA_UPDATE');
INSERT INTO AUTHORITY(ID, NAME) VALUES (4, 'DATA_DELETE');

INSERT INTO USERS(ID, USERNAME, PASSWORD, ACCOUNT_EXPIRED, ACCOUNT_LOCKED, CREDENTIALS_EXPIRED, ENABLED)
  VALUES (1, 'admin', /*adminpassword123$*/'$2y$08$X0VDlU/dqysTBekvWjPpw.WLb2U4vgKbLEV/c.kRIVpjPApfga4C.', FALSE, FALSE, FALSE, TRUE);

INSERT INTO USERS(ID, USERNAME, PASSWORD, ACCOUNT_EXPIRED, ACCOUNT_LOCKED, CREDENTIALS_EXPIRED, ENABLED)
  VALUES (2, 'reader', /*readerpassword123$*/'$2y$08$6p4VXzhAxfwXsjkIc3CWfeRt2gYNQcKGxqiuorOMXJH9Vd7J/HUbO', FALSE, FALSE, FALSE, TRUE);

    
INSERT INTO USERS_AUTHORITIES(USER_ID, AUTHORITY_ID) VALUES (1, 1);
INSERT INTO USERS_AUTHORITIES(USER_ID, AUTHORITY_ID) VALUES (1, 2);
INSERT INTO USERS_AUTHORITIES(USER_ID, AUTHORITY_ID) VALUES (1, 3);
INSERT INTO USERS_AUTHORITIES(USER_ID, AUTHORITY_ID) VALUES (1, 4);
INSERT INTO USERS_AUTHORITIES(USER_ID, AUTHORITY_ID) VALUES (2, 2);


CREATE TABLE OAUTH_CLIENT_DETAILS (
  CLIENT_ID VARCHAR(255) PRIMARY KEY,
  RESOURCE_IDS VARCHAR(255),
  CLIENT_SECRET VARCHAR(255),
  SCOPE VARCHAR(255),
  AUTHORIZED_GRANT_TYPES VARCHAR(255),
  WEB_SERVER_REDIRECT_URI VARCHAR(255),
  AUTHORITIES VARCHAR(255),
  ACCESS_TOKEN_VALIDITY INTEGER,
  REFRESH_TOKEN_VALIDITY INTEGER,
  ADDITIONAL_INFORMATION VARCHAR(4096),
  AUTOAPPROVE VARCHAR(255)
);

CREATE TABLE OAUTH_CLIENT_TOKEN (
  TOKEN_ID VARCHAR(255),
  TOKEN BYTEA,
  AUTHENTICATION_ID VARCHAR(255) PRIMARY KEY,
  USER_NAME VARCHAR(255),
  CLIENT_ID VARCHAR(255)
);

CREATE TABLE OAUTH_ACCESS_TOKEN (
  TOKEN_ID VARCHAR(255),
  TOKEN BYTEA,
  AUTHENTICATION_ID VARCHAR(255) PRIMARY KEY,
  USER_NAME VARCHAR(255),
  CLIENT_ID VARCHAR(255),
  AUTHENTICATION BYTEA,
  REFRESH_TOKEN VARCHAR(255)
);

CREATE TABLE OAUTH_REFRESH_TOKEN (
  TOKEN_ID VARCHAR(255),
  TOKEN BYTEA,
  AUTHENTICATION BYTEA
);

CREATE TABLE OAUTH_CODE (
  CODE VARCHAR(255),
  AUTHENTICATION BYTEA
);

CREATE TABLE OAUTH_APPROVALS (
  USERID VARCHAR(255),
  CLIENTID VARCHAR(255),
  SCOPE VARCHAR(255),
  STATUS VARCHAR(10),
  EXPIRESAT TIMESTAMP,
  LASTMODIFIEDAT TIMESTAMP
);


INSERT INTO OAUTH_CLIENT_DETAILS(CLIENT_ID, RESOURCE_IDS, CLIENT_SECRET, SCOPE, AUTHORIZED_GRANT_TYPES, AUTHORITIES, ACCESS_TOKEN_VALIDITY, REFRESH_TOKEN_VALIDITY)
	VALUES ('spring-security-oauth2-read-client', 'resource-server-rest-api',
	/*read-client-password123$*/'$2y$04$G5FMxe796CrUWPxonR9RDemAW0fTj8/wL76LlkaU1hrnsJ2OgTYVm',
	'read', 'password,authorization_code,refresh_token,implicit', 'USER', 10800, 2592000);

INSERT INTO OAUTH_CLIENT_DETAILS(CLIENT_ID, RESOURCE_IDS, CLIENT_SECRET, SCOPE, AUTHORIZED_GRANT_TYPES, AUTHORITIES, ACCESS_TOKEN_VALIDITY, REFRESH_TOKEN_VALIDITY)
	VALUES ('spring-security-oauth2-read-write-client', 'resource-server-rest-api',
	/*read-write-client-password123$*/'$2y$04$4NPBgWwUs5v7W01kjRouYuhPcm51kSEfe0ITktrrfHdR0rHrACcPu',
	'read,write', 'password,authorization_code,refresh_token,implicit', 'USER', 10800, 2592000);